<!DOCTYPE html>
<html lang="en">
<head>
    <title>Deep Link Generator</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0; 
            padding: 0;
            line-height: 1.6;
        }

        #header {
            background-image: url("ms.png");
            background-size: cover;
            background-position: center; 
            background-repeat: no-repeat;
            color: white;
            font-size: 2em;
            text-align: center;
            height: 400px; 
            text-shadow: 0px 0px 10px black;
            background-color: rgba(0, 0, 0, 0.5);
            background-blend-mode: darken;
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }

        h1 {
            margin: 0; 
        }

        h2 {
            text-align: center;
        }

        .main {
            margin: 20px auto;
            width: 50%;
        }

        .form-row {
            margin: 10px 0px;
            display: flex;
            align-items: center;
        }

        .form-column {
            width: 200px;
            float: left;
        }

        input, select, button {
            padding: 10px;
            width: 100%;
            margin: 5px 0;
        }

        button {
            border-radius: 10px;
            background-color: #0078D7;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #005BB5;
        }

        button:focus {
            outline: 2px solid #005BB5;
            outline-offset: 2px;
        }

        #generatedLink {
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
            word-wrap: break-word;
        }

        #errorMessage {
            color: red;
            text-align: center;
        }

        .link-button {
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="header" aria-label="Marks & Spencer Deep Link Generator">
        <h1>Deep Link Generator</h1>
    </div>

    <h2>Generate Links for Marks & Spencer Shirts</h2>

    <div class="main">
        <form id="linkForm" aria-labelledby="form-description">
            <p id="form-description">Use this form to generate deep links for Marks & Spencer shirts by selecting the fit and/or color.</p>

            <p><strong>How the URL Works Using Filters:</strong></p>
            <ul>
                <li><strong>Base:</strong> The base URL is the main address of the website and sometimes includes the country of relevance. For example, <code>https://www.marksandspencer.com/ie</code>.</li>
                <li><strong>Filter:</strong> Filters are parameters added to the URL that specify certain criteria for the content being accessed. They help narrow down the results based on user preferences.</li>
            </ul>

            <p><strong>Example URL:</strong></p>
            <code>https://www.marksandspencer.com/ie/l/men/mens-shirts/fs5/regular-fit </code>
            <ul>
                <li><strong>Base:</strong> <code>https://www.marksandspencer.com/ie</code></li>
                <li><strong>Filters:</strong>
                    <ul>
                        <li><code>regular-fit</code>: This filter specifies that the user is looking for regular fit shirts.</li>
                    </ul>
                </li>
            </ul>

            <p><strong>Alternate URL From Website:</strong></p>
            <ul>
                <li><code>https://www.marksandspencer.com/ie/l/men/mens-shirts/fs5/regular-fit#intid=finav_mw_plp_Regular%20Fit%20Shirts_foundit_fi_fi-Mens-Shirts_top_plp_12_1</code></li>
            </ul>
            <p><strong>Note:</strong> The first URL is generated in the simplest way, filtering with a direct path instead of query strings, while the second URL is manually copied from the website. Both URLs work and lead to the same result. 

            The difference is due to the fact that the manually copied URL includes additional tracking parameters (<code>#intid</code>).</p>

            <div class="form-row">
                <div class="form-column">
                    <label for="fit">Select Fit:</label>
                </div>
                <select id="fit" name="fit">
                    <option value="">--Select Fit--</option>
                    <option value="regular-fit">Regular Fit</option>
                    <option value="slim-fit">Slim Fit</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-column">
                    <label for="color">Select Color:</label>
                </div>
                <select id="color" name="color">
                    <option value="">--Select Color--</option>
                    <option value="blue">Blue</option>
                    <option value="white">White</option>
                    <option value="green">Green</option>
                </select>
            </div>

            <p id="errorMessage" role="alert"></p>

            <div class="form-row">
                <button type="button" onclick="generateLink()" aria-label="Generate a deep link for the selected fit and/or color">Generate Link</button>
            </div>
        </form>

        <h2>Generated Deep Link:</h2>
        <p id="generatedLink" role="status" aria-live="polite"></p>

        <div class="link-button">
            <a id="openLinkButton" href="#" target="_blank" style="display: none;">
                <button>Go to Link</button>
            </a>
        </div>
    </div>

    <script>
        function generateLink() {
            const fit = document.getElementById('fit').value;
            const color = document.getElementById('color').value;
            const errorMessage = document.getElementById('errorMessage');
            const baseUrl = 'https://www.marksandspencer.com/ie/l/men/mens-shirts';
            let deepLink;

            if (!fit && !color) {
                errorMessage.innerText = "Please select at least one option (fit or color).";
                document.getElementById('generatedLink').innerText = ""; 
                document.getElementById('openLinkButton').style.display = "none";
                return;
            }

            if (fit && color) {
                deepLink = `${baseUrl}/fs5/${fit}/${color}`;
            } else if (fit) {
                deepLink = `${baseUrl}/fs5/${fit}`;
            } else {
                deepLink = `${baseUrl}/fs5/${color}`;
            }

            errorMessage.innerText = ""; 
            document.getElementById('generatedLink').innerText = deepLink;

            const openLinkButton = document.getElementById('openLinkButton');
            openLinkButton.href = deepLink;
            openLinkButton.style.display = "inline"; 
        }
    </script>


</body>
</html>